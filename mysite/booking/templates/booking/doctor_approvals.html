{% extends "booking/doctor_base.html" %}

{% block title %}Doctor – Pending Approvals{% endblock %}

{% block content %}
<h3 class="fw-bold mb-3">Pending Appointment Requests</h3>
<p class="text-muted">
  Review and approve or reject appointment requests assigned to you.
</p>

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Patient</th>
        <th>Date</th>
        <th>Time</th>
        <th>Symptoms / Reason</th>
        <th>Status</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
    {% for appt in pending_appointments %}
      <tr>
        <td>{{ appt.id }}</td>
        <td>{{ appt.patient.get_full_name|default:appt.patient.username }}</td>
        <td>{{ appt.date }}</td>
        <td>{{ appt.time }}</td>
        <td>{{ appt.symptoms|default:"—" }}</td>
        <td>{{ appt.status }}</td>
        <td>
          <a href="{% url 'doctor_approve' appt.id %}" class="btn btn-sm btn-success">
            Approve
          </a>
          <a href="{% url 'doctor_reject' appt.id %}" class="btn btn-sm btn-outline-danger ms-1">
            Reject
          </a>
          <a href="{% url 'doctor_reschedule' appt.id %}" class="btn btn-sm btn-outline-secondary ms-1">
            Reschedule
          </a>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="7" class="text-muted">No pending appointment requests.</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
