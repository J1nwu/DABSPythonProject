{% extends "booking/admin_base.html" %}

{% block content %}
<h3 class="fw-bold mb-3">System Settings</h3>

<div class="row">
  <div class="col-lg-8">
    <form method="post" class="card shadow-sm border-0">
      {% csrf_token %}
      <div class="card-body">
        <div class="mb-3">
          <label class="form-label">Site / System Name</label>
            <label>
                <input type="text" class="form-control" name="site_name"
                       value="{{ settings_obj.site_name }}">
            </label>
            <div class="form-text">Shown in the header (e.g., DABS).</div>
        </div>

        <div class="mb-3">
          <label class="form-label">Hospital / Organisation Name</label>
            <label>
                <input type="text" class="form-control" name="hospital_name"
                       value="{{ settings_obj.hospital_name }}">
            </label>
        </div>

        <div class="mb-3">
          <label class="form-label">Support Email</label>
            <label>
                <input type="email" class="form-control" name="support_email"
                       value="{{ settings_obj.support_email }}">
            </label>
        </div>

        <div class="mb-3">
          <label class="form-label">Support Phone</label>
          <input type="text" class="form-control" name="support_phone"
                 value="{{ settings_obj.support_phone }}">
        </div>

        <div class="mb-3">
          <label class="form-label">Default Slot (minutes)</label>
          <input type="number" class="form-control" name="default_slot_minutes"
                 value="{{ settings_obj.default_slot_minutes|default:15 }}">
          <div class="form-text">Used as a reference for appointment time slots.</div>
        </div>

        <h5 class="fw-bold mt-3 mb-2">Access Control</h5>
        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="allow_patient_registration"
                 id="allow_patient_registration"
                 {% if settings_obj.allow_patient_registration %}checked{% endif %}>
          <label class="form-check-label" for="allow_patient_registration">
            Allow new patient registrations
          </label>
        </div>

        <div class="form-check">
          <input class="form-check-input" type="checkbox" name="allow_doctor_registration"
                 id="allow_doctor_registration"
                 {% if settings_obj.allow_doctor_registration %}checked{% endif %}>
          <label class="form-check-label" for="allow_doctor_registration">
            Allow new doctor registrations
          </label>
        </div>

        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" name="maintenance_mode"
                 id="maintenance_mode"
                 {% if settings_obj.maintenance_mode %}checked{% endif %}>
          <label class="form-check-label" for="maintenance_mode">
            Maintenance mode (read-only, block new registrations and bookings)
          </label>
        </div>

        <button class="btn btn-primary">Save Settings</button>
      </div>
    </form>
  </div>

  <div class="col-lg-4 mt-3 mt-lg-0">
    <div class="card shadow-sm border-0">
      <div class="card-body">
        <h5 class="fw-bold mb-3">Current Summary</h5>
        <p class="mb-1"><strong>Site:</strong> {{ settings_obj.site_name }}</p>
        <p class="mb-1"><strong>Hospital:</strong> {{ settings_obj.hospital_name|default:"—" }}</p>
        <p class="mb-1"><strong>Email:</strong> {{ settings_obj.support_email|default:"—" }}</p>
        <p class="mb-1"><strong>Phone:</strong> {{ settings_obj.support_phone|default:"—" }}</p>
        <p class="mb-1"><strong>Default Slot:</strong> {{ settings_obj.default_slot_minutes|default:15 }} min</p>
        <p class="mb-1"><strong>Patient Registration:</strong>
          {% if settings_obj.allow_patient_registration %}Allowed{% else %}Blocked{% endif %}
          </p>
        <p class="mb-1"><strong>Doctor Registration:</strong>
          {% if settings_obj.allow_doctor_registration %}Allowed{% else %}Blocked{% endif %}
        </p>
        <p class="mb-0"><strong>Maintenance:</strong>
          {% if settings_obj.maintenance_mode %}ON{% else %}OFF{% endif %}
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %}