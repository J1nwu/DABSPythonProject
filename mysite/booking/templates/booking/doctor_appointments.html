{% extends "booking/doctor_base.html" %}
{% block page_title %} â€” My Appointments{% endblock %}

{% block content %}
<h3 class="fw-bold mb-3">My Appointments</h3>

<form class="row g-2 mb-3" method="get">
  <div class="col-md-4">
    <input class="form-control" type="text" name="q"
           placeholder="Search by patient or note" value="{{ q }}">
  </div>
  <div class="col-md-3">
    <select class="form-select" name="status">
      <option value="">All Status</option>
      <option value="Pending"   {% if status == 'Pending' %}selected{% endif %}>Pending</option>
      <option value="Approved"  {% if status == 'Approved' %}selected{% endif %}>Approved</option>
      <option value="Cancelled" {% if status == 'Cancelled' %}selected{% endif %}>Cancelled</option>
    </select>
  </div>
  <div class="col-md-3">
    <button class="btn btn-primary">Filter</button>
    <a href="." class="btn btn-outline-secondary ms-1">Reset</a>
  </div>
</form>

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead class="table-light">
      <tr>
        <th>ID</th>
        <th>Patient</th>
        <th>Date</th>
        <th>Time</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
    {% for appt in appointments %}
      <tr>
        <td>{{ appt.id }}</td>
        <td>{{ appt.patient.user.get_full_name|default:appt.patient.user.username }}</td>
        <td>{{ appt.date }}</td>
        <td>{{ appt.time }}</td>
        <td>{{ appt.status }}</td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="5" class="text-muted">No appointments found for the selected filters.</td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}